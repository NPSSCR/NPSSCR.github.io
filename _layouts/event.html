<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{{ page.title }}</title>
    {% include header.html %}
  </head>
  <body>
    <main id="main-content" class="site-content">
      <article
        class="page-full post-64 page type-page status-publish hentry">
        <header class="entry-header">
          <h1 class="entry-title">{{ page.title }}</h1>
        </header>
        <script>
          var event = {{ page | jsonify }};
          var eventDate = new Date(event.date);
          var eventDateFormatted = eventDate.toLocaleDateString('es-CR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
          var eventTime = eventDate.toLocaleTimeString('es-CR', { hour: '2-digit', minute: '2-digit' });
          
          function getTimeRemaining(endtime) {
            var t = Date.parse(endtime) - Date.parse(new Date());
            var seconds = Math.floor((t / 1000) % 60);
            var minutes = Math.floor((t / 1000 / 60) % 60);
            var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
            var days = Math.floor(t / (1000 * 60 * 60 * 24));
            return {
              'total': t,
              'days': days,
              'hours': hours,
              'minutes': minutes,
              'seconds': seconds
            };
          }

          function InitializeClock(id, endtime) {
            var clock = document.getElementById(id);
            var daysSpan = clock.querySelector('.days');
            var hoursSpan = clock.querySelector('.hours');
            var minutesSpan = clock.querySelector('.minutes');
            var secondsSpan = clock.querySelector('.seconds');

            function updateClock() {
              var t = getTimeRemaining(endtime);

              daysSpan.innerHTML = t.days;
              hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
              minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
              secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

              if (t.total <= 0) {
                clearInterval(timeinterval);
              }
            }

            updateClock();
            var timeinterval = setInterval(updateClock, 1000);
          }
          
          InitializeClock('clockdiv', eventDate);


        </script>
        <div class="tc fw1 f2 near-white sans-serif center" id="clockdiv">
          <div class="pa2 br3 bg-blue dib">
            <span class="pa3 br3 bg-dark-blue dib days">14</span>
            <div class="pt1 f5 fw1">Days</div>
          </div>
          <div class="pa2 br3 bg-blue dib">
            <span class="pa3 br3 bg-dark-blue dib hours">23</span>
            <div class="pt1 f5 fw1">Hours</div>
          </div>
          <div class="pa2 br3 bg-blue dib">
            <span class="pa3 br3 bg-dark-blue dib minutes">59</span>
            <div class="pt1 f5 fw1">Minutes</div>
          </div>
          <div class="pa2 br3 bg-blue dib">
            <span class="pa3 br3 bg-dark-blue dib seconds">47</span>
            <div class="pt1 f5 fw1">Seconds</div>
          </div>
        </div>
        <div class="entry-content">{{ content }}</div>
        </article>
    </section>
    </main>
    {% include footer.html %}
  </body>
</html>
